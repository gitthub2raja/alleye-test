import{j as e,a as g,r as c,B as p,s as x}from"./index-D0LKihWx.js";const b=({title:a,children:t})=>e.jsxs(g,{className:"max-w-2xl mx-auto animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:a}),t]}),j=({user:a})=>e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("img",{src:a.avatar_url||`https://i.pravatar.cc/150?u=${a.id}`,alt:a.name,className:"w-24 h-24 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-text-secondary",children:a.role})]})]}),v=({user:a,allowPasswordChange:t})=>{const[s,d]=c.useState(a.name),[r,u]=c.useState(""),[i,o]=c.useState(!1),f=async l=>{l.preventDefault(),o(!0);let m=!1;if(s!==a.name){const{error:n}=await x.from("profiles").update({name:s}).eq("id",a.id);if(n){alert("Error updating name: "+n.message),o(!1);return}m=!0}if(t&&r){const{error:n}=await x.auth.updateUser({password:r});if(n){alert("Error updating password: "+n.message),o(!1);return}m=!0}m&&(alert("Profile updated successfully!"),u("")),o(!1)};return e.jsxs("form",{className:"space-y-4",onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Name"}),e.jsx("input",{type:"text",value:s,onChange:l=>d(l.target.value),className:"mt-1 form-input",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"Email"}),e.jsx("input",{type:"email",value:a.email,className:"mt-1 form-input bg-sidebar-accent",readOnly:!0})]}),t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:"New Password"}),e.jsx("input",{type:"password",value:r,onChange:l=>u(l.target.value),placeholder:"Leave blank to keep current password",className:"mt-1 form-input",disabled:i})]}),e.jsx("div",{className:"pt-4 flex items-center",children:e.jsx(p,{type:"submit",variant:"primary",disabled:i,children:i?"Saving...":"Save Profile"})})]})},N=({onLogout:a})=>{const[t,s]=c.useState(!1),d=async()=>{s(!0);try{await a()}catch(r){console.error("Logout failed:",r),s(!1)}};return e.jsx(p,{type:"button",variant:"danger",onClick:d,disabled:t,children:t?"Logging out...":"Logout"})};export{N as L,b as P,j as a,v as b};
